<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
  <div class="offcanvas-header">
    <h5 id="offcanvasRightLabel" id="cart_drawer_count">Cart Item &bull;{{cart.item_count}}</h5>
    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">
    <div class="card_info">
      <table class="table">
        {% for item in cart.items %}
        <tr class="item">
          <td class="product-image">
            <img src="{{ item.image | img_url: 'small' }}" alt="{{ item.product.title }}">
          </td>
          <td class="item-info">
            <h6 class="item-title">{{item.product.title}}</h6>
            {% unless item.product.has_only_default_variant %}
            {% for option in item.options_with_values %}
            <span class="item_option">{{ option.value }}</span>
            {% unless forloop.last %}
            /
            {% endunless %}
            {% endfor %}
            {% endunless %}
          </td>
          <td class="item-quantity">
            <label>Quantity</label>
            <div class="input-group quantity-group" style="max-width: 120px;">
              <button class="btn btn-outline-secondary" type="button" aria-label="Decrease quantity"
              style="border-radius: 4px 0 0 4px;"
              onclick="updateCartQuantity({{ item.key | json }}, {{ item.quantity | minus: 1 }})">-</button>
              <input type="number" name="updates[]" value="{{ item.quantity }}" min="1" class="form-control text-center"
              style="border-radius: 0; box-shadow: none;"
              onchange="updateCartQuantity({{ item.key | json }}, this.value)">
              <button class="btn btn-outline-secondary" type="button" aria-label="Increase quantity"
              style="border-radius: 0 4px 4px 0;"
              onclick="updateCartQuantity({{ item.key | json }}, {{ item.quantity | plus: 1 }})">+</button>
            </div>
            <script>
              function updateCartQuantity(key, quantity) {
              fetch('/cart/change.js', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ id: key, quantity: Number(quantity) })
              })
              .then(response => response.json())
              .then(() => location.reload());
              }
            </script>

          </td>
        </tr>
        {% endfor %}
      </table>
    </div>
  </div>
</div>